<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Enviar mensaje motivacional</title>
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          crossorigin="anonymous">
</head>
<body class="bg-light">

<div th:replace="~{fragments/navbar :: nav}"></div>

<div class="container py-4">
    <h3>Enviar mensaje motivacional</h3>

    <div th:if="${msgExito}" class="alert alert-success" th:text="${msgExito}"></div>
    <div th:if="${msgError}" class="alert alert-danger" th:text="${msgError}"></div>

    <form th:action="@{/mensajes/guardar}" th:object="${mensaje}" method="post" class="mt-3">

        <div class="form-group">
            <label>Remitente</label>
            <select class="form-control" th:field="*{remitenteId}">
                <option th:each="u : ${usuarios}" th:value="${u.id}" th:text="${u.nombre}"></option>
            </select>
            <small class="text-danger" th:if="${#fields.hasErrors('remitenteId')}" th:errors="*{remitenteId}"></small>
        </div>

        <div class="form-group">
            <label>Destinatario</label>
            <select class="form-control" th:field="*{destinatarioId}">
                <option th:each="u : ${usuarios}" th:value="${u.id}" th:text="${u.nombre}"></option>
            </select>
            <small class="text-danger" th:if="${#fields.hasErrors('destinatarioId')}" th:errors="*{destinatarioId}"></small>
        </div>

        <div class="form-group">
            <label>Regalo</label><br>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" th:field="*{regaloTipo}" value="FLOR">
                <label class="form-check-label">Flor amarilla</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" th:field="*{regaloTipo}" value="CARRITO">
                <label class="form-check-label">Carrito (elige color)</label>
            </div>
            <small class="text-danger" th:if="${#fields.hasErrors('regaloTipo')}" th:errors="*{regaloTipo}"></small>
        </div>

        <div class="form-group">
            <label>Color del regalo</label>
            <input type="text" class="form-control" th:field="*{regaloColor}">
            <small class="text-danger" th:if="${#fields.hasErrors('regaloColor')}" th:errors="*{regaloColor}"></small>
        </div>

        <div class="form-group">
            <label>Mensaje motivacional</label>
            <textarea rows="3" class="form-control" th:field="*{contenido}"></textarea>
            <small class="text-danger" th:if="${#fields.hasErrors('contenido')}" th:errors="*{contenido}"></small>
        </div>

        <div class="d-flex">
            <a class="btn btn-outline-secondary mr-2" th:href="@{/}">Cancelar</a>
            <button class="btn btn-primary" type="submit">Enviar</button>
        </div>
    </form>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
